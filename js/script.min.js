const tableBody=document.querySelector(".table__body"),tableEditBtn=document.querySelectorAll(".table__button"),addBtn=document.querySelector(".add-block__button"),addForm=document.querySelector(".add-block"),addInputs=document.querySelectorAll(".add-block__input"),addBrandInput=document.querySelector(".add-brand"),addCarInput=document.querySelector(".add-car"),addYearInput=document.querySelector(".add-year");let tableList=[];function checkStorage(){localStorage.getItem("tableList")&&(tableList=JSON.parse(localStorage.getItem("tableList")),displayTable())}function toStorage(){localStorage.setItem("tableList",JSON.stringify(tableList))}function absenceOfData(){tableList.length<=0?displayNoData():displayTable()}function displayNoData(){tableBody.innerHTML='\n    <tr class="table__row">\n      <th class="table__item table__item--car" scope="row">brak danych</th>\n      <td class="table__item">brak danych</td>\n      <td class="table__item">brak danych</td>\n      <td class="table__item table__item--buttons">\n        <button class="table__button standart-btn" type="button" disabled>edit</button>\n        <button class="table__button standart-btn" type="button" disabled>delete</button>\n      </td>\n    </tr>\n  '}function displayTable(){let t="";tableList.forEach((function(e,a){t+=`\n      <tr class="table__row">\n        <th class="table__item table__item--car" scope="row">${e.brand}</th>\n        <td class="table__item">${e.car}</td>\n        <td class="table__item"> ${e.year}</td>\n        <td class="table__item table__item--buttons">\n          <button class="table__button standart-btn table__button--edit" type="button" data-edit-btn="${a}">edit</button>\n          <button class="table__button standart-btn table__button--delete" type="button" data-delete-btn="${a}">delete</button>\n        </td>\n      </tr>\n    `,tableBody.innerHTML=t})),deleteTableElem(),editTable()}function deleteTableElem(){document.querySelectorAll(".table__button--delete").forEach((t=>{t.addEventListener("click",(t=>{let e=t.target.getAttribute("data-delete-btn");tableList.splice(e,1),toStorage(),absenceOfData()}))}))}checkStorage(),absenceOfData(),addBtn.addEventListener("click",(t=>{if(t.preventDefault(),addBrandInput.value&&addCarInput.value&&addYearInput.value){let t={brand:addBrandInput.value.toLowerCase(),car:addCarInput.value.toLowerCase(),year:addYearInput.value.toLowerCase()};tableList.push(t),toStorage(),addForm.reset(),displayTable()}else addInputs.forEach((t=>{t.value||(t.classList.add("add-block__input--error"),t.placeholder="enter a data!",setTimeout((()=>t.classList.remove("add-block__input--error")),3e3))}))}));const sortUpBtn=document.querySelectorAll(".table__sort-button--upp"),sortdownBtn=document.querySelectorAll(".table__sort-button--down");function sortUpCars(t){return(e,a)=>e[t]>a[t]?1:-1}function sortDownCars(t){return(e,a)=>e[t]<a[t]?1:-1}sortUpBtn.forEach((t=>{t.addEventListener("click",(e=>{let a=t.getAttribute("data-sort-btn");tableList.sort(sortUpCars(a)),displayTable()}))})),sortdownBtn.forEach((t=>{t.addEventListener("click",(e=>{let a=t.getAttribute("data-sort-btn");tableList.sort(sortDownCars(a)),displayTable()}))}));const body=document.querySelector(".body"),modal=document.querySelector(".modal"),modalBg=document.querySelector(".modal__bg"),modalBtn=document.querySelector(".modal__button"),modalInputs=document.querySelectorAll(".modal__input"),modalInputBrand=document.querySelector(".modal__input--brand"),modalInputCar=document.querySelector(".modal__input--car"),modalInputYear=document.querySelector(".modal__input--year");function editTable(){document.querySelectorAll(".table__button--edit").forEach((t=>{t.addEventListener("click",(t=>{modalOpen(t);let e=t.target.getAttribute("data-edit-btn");modalInputBrand.value=tableList[e].brand,modalInputCar.value=tableList[e].car,modalInputYear.value=tableList[e].year,addEditCar(e)}))}))}function addEditCar(t){modalBtn.addEventListener("click",(e=>{if(e.preventDefault(),modalInputBrand.value&&modalInputCar.value&&modalInputYear.value){let e={brand:modalInputBrand.value.toLowerCase(),car:modalInputCar.value.toLowerCase(),year:modalInputYear.value.toLowerCase()};tableList[t]=e,toStorage(),displayTable(),t="",modalClose()}else modalInputs.forEach((t=>{t.value||(t.classList.add("modal__input--error"),t.placeholder="enter a data!",setTimeout((()=>t.classList.remove("modal__input--error")),3e3))}))}))}function modalOpen(t){modal.classList.remove("modal--hidden"),body.classList.add("body--scrolloff"),modalKeyOpt()}function modalClose(){modal.classList.add("modal--hidden"),body.classList.remove("body--scrolloff")}function modalKeyOpt(){window.onkeydown=t=>{27==t.keyCode&&modalClose(t)}}modalBg.addEventListener("click",(()=>modalClose()));